<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import numpy as np
import logging
logger = logging.getLogger(__name__)

__version__ = &#39;1.0&#39;
__author__ = &#39;Steve Shillitoe&#39;
#October/November 2020

class ROIs():
    &#34;&#34;&#34;
    This class provides a data structure and associated input and 
    output functions for the storage of the ROI&#39;s drawn/painted 
    on a DICOM image.
    
    An object is instanciated from this class in the GraphicsView class.

    Weasel gives an ROI a default name but it can be renamed by the user.
    An ROI may extend over 1 or more images and on each image it may have 
    a different shape and position.

    A mask is a boolean array that is the same size as the DICOM images. 
    A blank mask contains only False values.  When an ROI is drawn on an
    image, the array elements in the mask corresponding to the ROI are
    set to True.

    Mask data is stored in a Python dictionary, where the key is the 
    ROI&#39;s name and the value a list of masks, one mask for each image
    in the DICOM series. Initially all the masks in this list are blank.
   &#34;&#34;&#34;
    def __init__(self, numberOfImages, linkToGraphicsView):
        &#34;&#34;&#34;Instantiates an ROIs object
        
        arguments:
            numberOfImages - number of images in the DICOM series
            linkToGraphicsView - an object reference to the GraphicView
                                object hosting the ROIs object
        &#34;&#34;&#34;
        self.dictMasks = {}
        self.regionNumber = 1
        self.prevRegionName = &#34;region1&#34;
        self.NumOfImages = numberOfImages
        self.linkToGraphicsView = linkToGraphicsView
        logger.info(&#34;ROI_Storage object created&#34;)

    
    def resetRegionNumber(self):
        &#34;&#34;&#34;Resets the regionNumber property to 1. It is incremented
        by 1, each time a new ROI is created with the default name
        region[regionNumber]&#34;&#34;&#34;
        self.regionNumber = 1


    def __repr__(self):
        &#34;&#34;&#34;Represents this class&#39;s objects as a string&#34;&#34;&#34;
        return &#39;{}&#39;.format(
           self.__class__.__name__)
   

    def addMask(self, mask):
        &#34;&#34;&#34;Overwrites the blank mask corresponding linked to a given image in the list of 
        initially blank masks with the updated mask containing the ROI.&#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.addMask called&#34;)
        try:
            if self.linkToGraphicsView.currentROIName in self.dictMasks:
                imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
                if imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] is None:
                    #empty list
                    imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
                else:
                    #already contains a mask, so add to an existing ROI 
                    #using boolean OR (|) to get the union 
                    imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] | mask
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
            else:
                #a new ROI
                #Make a copy of the list of image mask lists
                imageMaskList = self.createListOfBlankMasks(mask)
                #Add the current mask to the correct list in the list of lists
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
        except Exception as e:
            print(&#39;Error in ROI_Storage.addMask: &#39; + str(e))
            logger.exception(&#39;Error in ROI_Storage.addMask: &#39; + str(e))


    def replaceMask(self, newMask):
        &#34;&#34;&#34;
        For a given ROI and image, the existing mask is replaced by the new
        mask in the input argument, newMask.

        This function is not used. 
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.replaceMask called&#34;)
        try:
            if self.linkToGraphicsView.currentROIName in self.dictMasks:
                imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] =  newMask 
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
        except Exception as e:
            print(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))
            logger.exception(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))


    def createListOfBlankMasks(self, mask):
        &#34;&#34;&#34;
        Creates a list of blank masks. 
        
        Each mask is a boolean array with all
        elements set to False. It is the same size as
        the DICOM images in the series. There is one mask for
        each image in the series.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.createListOfBlankMasks called&#34;)
            ny, nx = np.shape(mask)
            blankMask = np.full((ny, nx), False, dtype=bool)
            return [blankMask for _ in range(self.NumOfImages)]
        except Exception as e:
            print(&#39;Error in ROI_Storage.createListOfBlankMasks: &#39; + str(e))


    def getNextRegionName(self):
        &#34;&#34;&#34;
        This function generates &amp; returns a new ROI name.

        A new ROI name is generated by incrementing the regionNumber class property by 1
        and concatenating with the string &#39;region&#39;.

        This new ROI name is also stored in the prevRegionName class property
        for use if the user renames this new ROI name. See the function
        renameDictionaryKey for further details.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.getNextRegionName called&#34;)
            self.regionNumber += 1
            nextRegionName = &#34;region&#34; + str(self.regionNumber)
            self.prevRegionName = nextRegionName
            return nextRegionName
        except Exception as e:
                print(&#39;Error in ROI_Storage.getNextRegionName: &#39; + str(e))


    def getListOfRegions(self):
        &#34;&#34;&#34;
        Returns a list of region names.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.getListOfRegions called&#34;)
            return list(self.dictMasks)
        except Exception as e:
                print(&#39;Error in ROI_Storage.getListOfRegions: &#39; + str(e))


    def setPreviousRegionName(self, regionName):
        &#34;&#34;&#34;
        Sets the value of the property prevRegionName to the input argument, regionName.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.setPreviousRegionName called&#34;)
        self.prevRegionName = regionName

    
    def getUpdatedMask(self):
        &#34;&#34;&#34;
        This function returns the  mask for a given 
        ROI &amp; image from the dictMasks dictionary.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.getUpdatedMask called&#34;)
        try:
            regionName = self.linkToGraphicsView.currentROIName
            imageNumber = self.linkToGraphicsView.currentImageNumber
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return mask
                else:
                    return None
            else:
                return None
        except Exception as e:
            print(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
            logger.exception(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))



    def getMask(self, regionName, imageNumber):
        &#34;&#34;&#34;
        This function returns the mask for a given 
        ROI &amp; image from the dictMasks dictionary.

        Input Arguments
        ***************
        regionName - Name of the ROI
        imageNumber - Ordinal position of the image in the DICOM series.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.getMask called&#34;)
        try:
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return mask
                else:
                    return None
            else:
                return None
        except Exception as e:
            print(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
            logger.exception(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))


    def hasRegionGotMask(self, regionName):
        &#34;&#34;&#34;
        This function returns True if a ROI has masks stored in the 
        dictMasks dictionary. Otherwise it returns False.

        Input Argument
        **************
        regionName - Name of the ROI.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.hasRegionGotMask called&#34;)
            if regionName in self.dictMasks: 
                return True
            else:
                return False
        except Exception as e:
                print(&#39;Error in ROI_Storage.hasRegionGotMask: &#39; + str(e))


    def hasImageGotMask(self, regionName, imageNumber):
        &#34;&#34;&#34;
        This function returns True if a particular ROI exists 
        on a particular image. Otherwise it returns False.

        Input Argument
        **************
        regionName - Name of the ROI.
        imageNumber - Ordinal position of the image in the DICOM series.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.hasImageGotMask called&#34;)
        try:
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return True
                else:
                    return False
            else:
                return False
        except Exception as e:
            print(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))
            logger.error(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))


    def returnListImagesWithMasks(self, regionName):
        &#34;&#34;&#34;
        Returns a list of the image numbers where the ROI, regionName
        has been drawn/painted on the image.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.returnListImagesWithMasks called&#34;)
        try:
            listImagesWithMasks = []
            if regionName in self.dictMasks: 
                maskList = self.dictMasks[regionName]
                for i in range(self.NumOfImages):
                   mask = self.dictMasks[regionName][i]
                   if mask.any():
                        listImagesWithMasks.append(i)
           
            return listImagesWithMasks

        except Exception as e:
            print(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))
            logger.error(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))


    def deleteMask(self, regionName=None):
        &#34;&#34;&#34;
        Deletes the masks associated with the ROI called regionName 
        in the dictMask dictionary.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.deleteMask called&#34;)
            if regionName:
                if regionName in self.dictMasks: 
                    del self.dictMasks[regionName]
        except Exception as e:
           print(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))
           logger.error(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))  


    def renameDictionaryKey(self, newName):
        &#34;&#34;&#34;
        Replaces the name of an existing ROI with the new name in the
        input argument newName.

        If this operation is successful, this function returns True
        otherwise it returns False if newName is already used as a 
        key in the dictMasks dictionary.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.renameDictionaryKey called&#34;)
        try:
            #print(&#34;self.prevRegionName={}&#34;.format(self.prevRegionName))
            if len(newName) &gt; 0:
                oldName = self.prevRegionName
                if oldName in self.dictMasks:
                    pass
                else:
                    oldName = newName[0 : len(newName)-1]
                #print(&#34;before POP newName={}, oldName={}&#34;.format(newName, oldName))
                if oldName in self.dictMasks:
                    if newName not in self.dictMasks:
                        #print(&#34;POP newName={}, oldName={}&#34;.format(newName, oldName))
                        self.dictMasks[newName] = self.dictMasks.pop(oldName)
                        return True
                    else:
                        return False
        except KeyError:
            print(&#34;Key error when oldName = {} &amp; newName ={}&#34;.format(oldName, newName))
        except Exception as e:
            print(&#39;Error in ROI_Storage.renameDictionaryKey: &#39; + str(e))
       

    def printContentsDictMasks(self):
        &#34;&#34;&#34;
        This function prints the name of each ROI, the number of 
        images they are drawn/painted on and the number of pixels in each ROI.

        This function was used during testing.
        &#34;&#34;&#34;
        print(&#34;Contents of self.dictMasks&#34;)
        for key, value in self.dictMasks.items():
            numMasks = 0
            for item in value:
                if item.any():
                    numMasks +=1
                    result = np.where(item == True)
                    numTrueValues = list(zip(result[1], result[0]))
            print(key, &#39; : &#39;, numMasks, &#39; Number True Coords: {}&#39;.format(numTrueValues))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs"><code class="flex name class">
<span>class <span class="ident">ROIs</span></span>
<span>(</span><span>numberOfImages, linkToGraphicsView)</span>
</code></dt>
<dd>
<div class="desc"><p>This class provides a data structure and associated input and
output functions for the storage of the ROI's drawn/painted
on a DICOM image.</p>
<p>An object is instanciated from this class in the GraphicsView class.</p>
<p>Weasel gives an ROI a default name but it can be renamed by the user.
An ROI may extend over 1 or more images and on each image it may have
a different shape and position.</p>
<p>A mask is a boolean array that is the same size as the DICOM images.
A blank mask contains only False values.
When an ROI is drawn on an
image, the array elements in the mask corresponding to the ROI are
set to True.</p>
<p>Mask data is stored in a Python dictionary, where the key is the
ROI's name and the value a list of masks, one mask for each image
in the DICOM series. Initially all the masks in this list are blank.</p>
<p>Instantiates an ROIs object</p>
<p>arguments:
numberOfImages - number of images in the DICOM series
linkToGraphicsView - an object reference to the GraphicView
object hosting the ROIs object</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ROIs():
    &#34;&#34;&#34;
    This class provides a data structure and associated input and 
    output functions for the storage of the ROI&#39;s drawn/painted 
    on a DICOM image.
    
    An object is instanciated from this class in the GraphicsView class.

    Weasel gives an ROI a default name but it can be renamed by the user.
    An ROI may extend over 1 or more images and on each image it may have 
    a different shape and position.

    A mask is a boolean array that is the same size as the DICOM images. 
    A blank mask contains only False values.  When an ROI is drawn on an
    image, the array elements in the mask corresponding to the ROI are
    set to True.

    Mask data is stored in a Python dictionary, where the key is the 
    ROI&#39;s name and the value a list of masks, one mask for each image
    in the DICOM series. Initially all the masks in this list are blank.
   &#34;&#34;&#34;
    def __init__(self, numberOfImages, linkToGraphicsView):
        &#34;&#34;&#34;Instantiates an ROIs object
        
        arguments:
            numberOfImages - number of images in the DICOM series
            linkToGraphicsView - an object reference to the GraphicView
                                object hosting the ROIs object
        &#34;&#34;&#34;
        self.dictMasks = {}
        self.regionNumber = 1
        self.prevRegionName = &#34;region1&#34;
        self.NumOfImages = numberOfImages
        self.linkToGraphicsView = linkToGraphicsView
        logger.info(&#34;ROI_Storage object created&#34;)

    
    def resetRegionNumber(self):
        &#34;&#34;&#34;Resets the regionNumber property to 1. It is incremented
        by 1, each time a new ROI is created with the default name
        region[regionNumber]&#34;&#34;&#34;
        self.regionNumber = 1


    def __repr__(self):
        &#34;&#34;&#34;Represents this class&#39;s objects as a string&#34;&#34;&#34;
        return &#39;{}&#39;.format(
           self.__class__.__name__)
   

    def addMask(self, mask):
        &#34;&#34;&#34;Overwrites the blank mask corresponding linked to a given image in the list of 
        initially blank masks with the updated mask containing the ROI.&#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.addMask called&#34;)
        try:
            if self.linkToGraphicsView.currentROIName in self.dictMasks:
                imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
                if imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] is None:
                    #empty list
                    imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
                else:
                    #already contains a mask, so add to an existing ROI 
                    #using boolean OR (|) to get the union 
                    imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] | mask
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
            else:
                #a new ROI
                #Make a copy of the list of image mask lists
                imageMaskList = self.createListOfBlankMasks(mask)
                #Add the current mask to the correct list in the list of lists
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
        except Exception as e:
            print(&#39;Error in ROI_Storage.addMask: &#39; + str(e))
            logger.exception(&#39;Error in ROI_Storage.addMask: &#39; + str(e))


    def replaceMask(self, newMask):
        &#34;&#34;&#34;
        For a given ROI and image, the existing mask is replaced by the new
        mask in the input argument, newMask.

        This function is not used. 
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.replaceMask called&#34;)
        try:
            if self.linkToGraphicsView.currentROIName in self.dictMasks:
                imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] =  newMask 
                self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
        except Exception as e:
            print(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))
            logger.exception(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))


    def createListOfBlankMasks(self, mask):
        &#34;&#34;&#34;
        Creates a list of blank masks. 
        
        Each mask is a boolean array with all
        elements set to False. It is the same size as
        the DICOM images in the series. There is one mask for
        each image in the series.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.createListOfBlankMasks called&#34;)
            ny, nx = np.shape(mask)
            blankMask = np.full((ny, nx), False, dtype=bool)
            return [blankMask for _ in range(self.NumOfImages)]
        except Exception as e:
            print(&#39;Error in ROI_Storage.createListOfBlankMasks: &#39; + str(e))


    def getNextRegionName(self):
        &#34;&#34;&#34;
        This function generates &amp; returns a new ROI name.

        A new ROI name is generated by incrementing the regionNumber class property by 1
        and concatenating with the string &#39;region&#39;.

        This new ROI name is also stored in the prevRegionName class property
        for use if the user renames this new ROI name. See the function
        renameDictionaryKey for further details.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.getNextRegionName called&#34;)
            self.regionNumber += 1
            nextRegionName = &#34;region&#34; + str(self.regionNumber)
            self.prevRegionName = nextRegionName
            return nextRegionName
        except Exception as e:
                print(&#39;Error in ROI_Storage.getNextRegionName: &#39; + str(e))


    def getListOfRegions(self):
        &#34;&#34;&#34;
        Returns a list of region names.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.getListOfRegions called&#34;)
            return list(self.dictMasks)
        except Exception as e:
                print(&#39;Error in ROI_Storage.getListOfRegions: &#39; + str(e))


    def setPreviousRegionName(self, regionName):
        &#34;&#34;&#34;
        Sets the value of the property prevRegionName to the input argument, regionName.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.setPreviousRegionName called&#34;)
        self.prevRegionName = regionName

    
    def getUpdatedMask(self):
        &#34;&#34;&#34;
        This function returns the  mask for a given 
        ROI &amp; image from the dictMasks dictionary.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.getUpdatedMask called&#34;)
        try:
            regionName = self.linkToGraphicsView.currentROIName
            imageNumber = self.linkToGraphicsView.currentImageNumber
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return mask
                else:
                    return None
            else:
                return None
        except Exception as e:
            print(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
            logger.exception(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))



    def getMask(self, regionName, imageNumber):
        &#34;&#34;&#34;
        This function returns the mask for a given 
        ROI &amp; image from the dictMasks dictionary.

        Input Arguments
        ***************
        regionName - Name of the ROI
        imageNumber - Ordinal position of the image in the DICOM series.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.getMask called&#34;)
        try:
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return mask
                else:
                    return None
            else:
                return None
        except Exception as e:
            print(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
            logger.exception(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))


    def hasRegionGotMask(self, regionName):
        &#34;&#34;&#34;
        This function returns True if a ROI has masks stored in the 
        dictMasks dictionary. Otherwise it returns False.

        Input Argument
        **************
        regionName - Name of the ROI.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.hasRegionGotMask called&#34;)
            if regionName in self.dictMasks: 
                return True
            else:
                return False
        except Exception as e:
                print(&#39;Error in ROI_Storage.hasRegionGotMask: &#39; + str(e))


    def hasImageGotMask(self, regionName, imageNumber):
        &#34;&#34;&#34;
        This function returns True if a particular ROI exists 
        on a particular image. Otherwise it returns False.

        Input Argument
        **************
        regionName - Name of the ROI.
        imageNumber - Ordinal position of the image in the DICOM series.

        Returns
        *******
        True or False
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.hasImageGotMask called&#34;)
        try:
            if regionName in self.dictMasks: 
                mask = self.dictMasks[regionName][imageNumber - 1]
                if mask.any():
                    return True
                else:
                    return False
            else:
                return False
        except Exception as e:
            print(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))
            logger.error(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))


    def returnListImagesWithMasks(self, regionName):
        &#34;&#34;&#34;
        Returns a list of the image numbers where the ROI, regionName
        has been drawn/painted on the image.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.returnListImagesWithMasks called&#34;)
        try:
            listImagesWithMasks = []
            if regionName in self.dictMasks: 
                maskList = self.dictMasks[regionName]
                for i in range(self.NumOfImages):
                   mask = self.dictMasks[regionName][i]
                   if mask.any():
                        listImagesWithMasks.append(i)
           
            return listImagesWithMasks

        except Exception as e:
            print(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))
            logger.error(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))


    def deleteMask(self, regionName=None):
        &#34;&#34;&#34;
        Deletes the masks associated with the ROI called regionName 
        in the dictMask dictionary.
        &#34;&#34;&#34;
        try:
            logger.info(&#34;ROI_Storage.deleteMask called&#34;)
            if regionName:
                if regionName in self.dictMasks: 
                    del self.dictMasks[regionName]
        except Exception as e:
           print(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))
           logger.error(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))  


    def renameDictionaryKey(self, newName):
        &#34;&#34;&#34;
        Replaces the name of an existing ROI with the new name in the
        input argument newName.

        If this operation is successful, this function returns True
        otherwise it returns False if newName is already used as a 
        key in the dictMasks dictionary.
        &#34;&#34;&#34;
        logger.info(&#34;ROI_Storage.renameDictionaryKey called&#34;)
        try:
            #print(&#34;self.prevRegionName={}&#34;.format(self.prevRegionName))
            if len(newName) &gt; 0:
                oldName = self.prevRegionName
                if oldName in self.dictMasks:
                    pass
                else:
                    oldName = newName[0 : len(newName)-1]
                #print(&#34;before POP newName={}, oldName={}&#34;.format(newName, oldName))
                if oldName in self.dictMasks:
                    if newName not in self.dictMasks:
                        #print(&#34;POP newName={}, oldName={}&#34;.format(newName, oldName))
                        self.dictMasks[newName] = self.dictMasks.pop(oldName)
                        return True
                    else:
                        return False
        except KeyError:
            print(&#34;Key error when oldName = {} &amp; newName ={}&#34;.format(oldName, newName))
        except Exception as e:
            print(&#39;Error in ROI_Storage.renameDictionaryKey: &#39; + str(e))
       

    def printContentsDictMasks(self):
        &#34;&#34;&#34;
        This function prints the name of each ROI, the number of 
        images they are drawn/painted on and the number of pixels in each ROI.

        This function was used during testing.
        &#34;&#34;&#34;
        print(&#34;Contents of self.dictMasks&#34;)
        for key, value in self.dictMasks.items():
            numMasks = 0
            for item in value:
                if item.any():
                    numMasks +=1
                    result = np.where(item == True)
                    numTrueValues = list(zip(result[1], result[0]))
            print(key, &#39; : &#39;, numMasks, &#39; Number True Coords: {}&#39;.format(numTrueValues))</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.addMask"><code class="name flex">
<span>def <span class="ident">addMask</span></span>(<span>self, mask)</span>
</code></dt>
<dd>
<div class="desc"><p>Overwrites the blank mask corresponding linked to a given image in the list of
initially blank masks with the updated mask containing the ROI.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addMask(self, mask):
    &#34;&#34;&#34;Overwrites the blank mask corresponding linked to a given image in the list of 
    initially blank masks with the updated mask containing the ROI.&#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.addMask called&#34;)
    try:
        if self.linkToGraphicsView.currentROIName in self.dictMasks:
            imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
            if imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] is None:
                #empty list
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
            else:
                #already contains a mask, so add to an existing ROI 
                #using boolean OR (|) to get the union 
                imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] | mask
            self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
        else:
            #a new ROI
            #Make a copy of the list of image mask lists
            imageMaskList = self.createListOfBlankMasks(mask)
            #Add the current mask to the correct list in the list of lists
            imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] = mask
            self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
    except Exception as e:
        print(&#39;Error in ROI_Storage.addMask: &#39; + str(e))
        logger.exception(&#39;Error in ROI_Storage.addMask: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.createListOfBlankMasks"><code class="name flex">
<span>def <span class="ident">createListOfBlankMasks</span></span>(<span>self, mask)</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a list of blank masks. </p>
<p>Each mask is a boolean array with all
elements set to False. It is the same size as
the DICOM images in the series. There is one mask for
each image in the series.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def createListOfBlankMasks(self, mask):
    &#34;&#34;&#34;
    Creates a list of blank masks. 
    
    Each mask is a boolean array with all
    elements set to False. It is the same size as
    the DICOM images in the series. There is one mask for
    each image in the series.
    &#34;&#34;&#34;
    try:
        logger.info(&#34;ROI_Storage.createListOfBlankMasks called&#34;)
        ny, nx = np.shape(mask)
        blankMask = np.full((ny, nx), False, dtype=bool)
        return [blankMask for _ in range(self.NumOfImages)]
    except Exception as e:
        print(&#39;Error in ROI_Storage.createListOfBlankMasks: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.deleteMask"><code class="name flex">
<span>def <span class="ident">deleteMask</span></span>(<span>self, regionName=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Deletes the masks associated with the ROI called regionName
in the dictMask dictionary.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deleteMask(self, regionName=None):
    &#34;&#34;&#34;
    Deletes the masks associated with the ROI called regionName 
    in the dictMask dictionary.
    &#34;&#34;&#34;
    try:
        logger.info(&#34;ROI_Storage.deleteMask called&#34;)
        if regionName:
            if regionName in self.dictMasks: 
                del self.dictMasks[regionName]
    except Exception as e:
       print(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))
       logger.error(&#39;Error in ROI_Storage.deleteMask: &#39; + str(e))  </code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getListOfRegions"><code class="name flex">
<span>def <span class="ident">getListOfRegions</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a list of region names.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getListOfRegions(self):
    &#34;&#34;&#34;
    Returns a list of region names.
    &#34;&#34;&#34;
    try:
        logger.info(&#34;ROI_Storage.getListOfRegions called&#34;)
        return list(self.dictMasks)
    except Exception as e:
            print(&#39;Error in ROI_Storage.getListOfRegions: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getMask"><code class="name flex">
<span>def <span class="ident">getMask</span></span>(<span>self, regionName, imageNumber)</span>
</code></dt>
<dd>
<div class="desc"><p>This function returns the mask for a given
ROI &amp; image from the dictMasks dictionary.</p>
<p>Input Arguments</p>
<hr>
<p>regionName - Name of the ROI
imageNumber - Ordinal position of the image in the DICOM series.</p>
<p>Returns</p>
<hr>
<p>True or False</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getMask(self, regionName, imageNumber):
    &#34;&#34;&#34;
    This function returns the mask for a given 
    ROI &amp; image from the dictMasks dictionary.

    Input Arguments
    ***************
    regionName - Name of the ROI
    imageNumber - Ordinal position of the image in the DICOM series.

    Returns
    *******
    True or False
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.getMask called&#34;)
    try:
        if regionName in self.dictMasks: 
            mask = self.dictMasks[regionName][imageNumber - 1]
            if mask.any():
                return mask
            else:
                return None
        else:
            return None
    except Exception as e:
        print(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
        logger.exception(&#39;Error in ROI_Storage.getMask when imageNumber={}: &#39;.format(imageNumber) + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getNextRegionName"><code class="name flex">
<span>def <span class="ident">getNextRegionName</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This function generates &amp; returns a new ROI name.</p>
<p>A new ROI name is generated by incrementing the regionNumber class property by 1
and concatenating with the string 'region'.</p>
<p>This new ROI name is also stored in the prevRegionName class property
for use if the user renames this new ROI name. See the function
renameDictionaryKey for further details.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNextRegionName(self):
    &#34;&#34;&#34;
    This function generates &amp; returns a new ROI name.

    A new ROI name is generated by incrementing the regionNumber class property by 1
    and concatenating with the string &#39;region&#39;.

    This new ROI name is also stored in the prevRegionName class property
    for use if the user renames this new ROI name. See the function
    renameDictionaryKey for further details.
    &#34;&#34;&#34;
    try:
        logger.info(&#34;ROI_Storage.getNextRegionName called&#34;)
        self.regionNumber += 1
        nextRegionName = &#34;region&#34; + str(self.regionNumber)
        self.prevRegionName = nextRegionName
        return nextRegionName
    except Exception as e:
            print(&#39;Error in ROI_Storage.getNextRegionName: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getUpdatedMask"><code class="name flex">
<span>def <span class="ident">getUpdatedMask</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This function returns the
mask for a given
ROI &amp; image from the dictMasks dictionary.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getUpdatedMask(self):
    &#34;&#34;&#34;
    This function returns the  mask for a given 
    ROI &amp; image from the dictMasks dictionary.
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.getUpdatedMask called&#34;)
    try:
        regionName = self.linkToGraphicsView.currentROIName
        imageNumber = self.linkToGraphicsView.currentImageNumber
        if regionName in self.dictMasks: 
            mask = self.dictMasks[regionName][imageNumber - 1]
            if mask.any():
                return mask
            else:
                return None
        else:
            return None
    except Exception as e:
        print(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))
        logger.exception(&#39;Error in ROI_Storage.getUpdatedMask when imageNumber={}: &#39;.format(imageNumber) + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasImageGotMask"><code class="name flex">
<span>def <span class="ident">hasImageGotMask</span></span>(<span>self, regionName, imageNumber)</span>
</code></dt>
<dd>
<div class="desc"><p>This function returns True if a particular ROI exists
on a particular image. Otherwise it returns False.</p>
<p>Input Argument</p>
<hr>
<p>regionName - Name of the ROI.
imageNumber - Ordinal position of the image in the DICOM series.</p>
<p>Returns</p>
<hr>
<p>True or False</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hasImageGotMask(self, regionName, imageNumber):
    &#34;&#34;&#34;
    This function returns True if a particular ROI exists 
    on a particular image. Otherwise it returns False.

    Input Argument
    **************
    regionName - Name of the ROI.
    imageNumber - Ordinal position of the image in the DICOM series.

    Returns
    *******
    True or False
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.hasImageGotMask called&#34;)
    try:
        if regionName in self.dictMasks: 
            mask = self.dictMasks[regionName][imageNumber - 1]
            if mask.any():
                return True
            else:
                return False
        else:
            return False
    except Exception as e:
        print(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))
        logger.error(&#39;Error in ROI_Storage.hasImageGotMask: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasRegionGotMask"><code class="name flex">
<span>def <span class="ident">hasRegionGotMask</span></span>(<span>self, regionName)</span>
</code></dt>
<dd>
<div class="desc"><p>This function returns True if a ROI has masks stored in the
dictMasks dictionary. Otherwise it returns False.</p>
<p>Input Argument</p>
<hr>
<p>regionName - Name of the ROI.</p>
<p>Returns</p>
<hr>
<p>True or False</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hasRegionGotMask(self, regionName):
    &#34;&#34;&#34;
    This function returns True if a ROI has masks stored in the 
    dictMasks dictionary. Otherwise it returns False.

    Input Argument
    **************
    regionName - Name of the ROI.

    Returns
    *******
    True or False
    &#34;&#34;&#34;
    try:
        logger.info(&#34;ROI_Storage.hasRegionGotMask called&#34;)
        if regionName in self.dictMasks: 
            return True
        else:
            return False
    except Exception as e:
            print(&#39;Error in ROI_Storage.hasRegionGotMask: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.printContentsDictMasks"><code class="name flex">
<span>def <span class="ident">printContentsDictMasks</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This function prints the name of each ROI, the number of
images they are drawn/painted on and the number of pixels in each ROI.</p>
<p>This function was used during testing.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def printContentsDictMasks(self):
    &#34;&#34;&#34;
    This function prints the name of each ROI, the number of 
    images they are drawn/painted on and the number of pixels in each ROI.

    This function was used during testing.
    &#34;&#34;&#34;
    print(&#34;Contents of self.dictMasks&#34;)
    for key, value in self.dictMasks.items():
        numMasks = 0
        for item in value:
            if item.any():
                numMasks +=1
                result = np.where(item == True)
                numTrueValues = list(zip(result[1], result[0]))
        print(key, &#39; : &#39;, numMasks, &#39; Number True Coords: {}&#39;.format(numTrueValues))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.renameDictionaryKey"><code class="name flex">
<span>def <span class="ident">renameDictionaryKey</span></span>(<span>self, newName)</span>
</code></dt>
<dd>
<div class="desc"><p>Replaces the name of an existing ROI with the new name in the
input argument newName.</p>
<p>If this operation is successful, this function returns True
otherwise it returns False if newName is already used as a
key in the dictMasks dictionary.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def renameDictionaryKey(self, newName):
    &#34;&#34;&#34;
    Replaces the name of an existing ROI with the new name in the
    input argument newName.

    If this operation is successful, this function returns True
    otherwise it returns False if newName is already used as a 
    key in the dictMasks dictionary.
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.renameDictionaryKey called&#34;)
    try:
        #print(&#34;self.prevRegionName={}&#34;.format(self.prevRegionName))
        if len(newName) &gt; 0:
            oldName = self.prevRegionName
            if oldName in self.dictMasks:
                pass
            else:
                oldName = newName[0 : len(newName)-1]
            #print(&#34;before POP newName={}, oldName={}&#34;.format(newName, oldName))
            if oldName in self.dictMasks:
                if newName not in self.dictMasks:
                    #print(&#34;POP newName={}, oldName={}&#34;.format(newName, oldName))
                    self.dictMasks[newName] = self.dictMasks.pop(oldName)
                    return True
                else:
                    return False
    except KeyError:
        print(&#34;Key error when oldName = {} &amp; newName ={}&#34;.format(oldName, newName))
    except Exception as e:
        print(&#39;Error in ROI_Storage.renameDictionaryKey: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.replaceMask"><code class="name flex">
<span>def <span class="ident">replaceMask</span></span>(<span>self, newMask)</span>
</code></dt>
<dd>
<div class="desc"><p>For a given ROI and image, the existing mask is replaced by the new
mask in the input argument, newMask.</p>
<p>This function is not used.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def replaceMask(self, newMask):
    &#34;&#34;&#34;
    For a given ROI and image, the existing mask is replaced by the new
    mask in the input argument, newMask.

    This function is not used. 
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.replaceMask called&#34;)
    try:
        if self.linkToGraphicsView.currentROIName in self.dictMasks:
            imageMaskList = self.dictMasks[self.linkToGraphicsView.currentROIName]
            imageMaskList[self.linkToGraphicsView.currentImageNumber - 1] =  newMask 
            self.dictMasks[self.linkToGraphicsView.currentROIName] = imageMaskList
    except Exception as e:
        print(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))
        logger.exception(&#39;Error in ROI_Storage.replaceMask: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.resetRegionNumber"><code class="name flex">
<span>def <span class="ident">resetRegionNumber</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Resets the regionNumber property to 1. It is incremented
by 1, each time a new ROI is created with the default name
region[regionNumber]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def resetRegionNumber(self):
    &#34;&#34;&#34;Resets the regionNumber property to 1. It is incremented
    by 1, each time a new ROI is created with the default name
    region[regionNumber]&#34;&#34;&#34;
    self.regionNumber = 1</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.returnListImagesWithMasks"><code class="name flex">
<span>def <span class="ident">returnListImagesWithMasks</span></span>(<span>self, regionName)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a list of the image numbers where the ROI, regionName
has been drawn/painted on the image.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def returnListImagesWithMasks(self, regionName):
    &#34;&#34;&#34;
    Returns a list of the image numbers where the ROI, regionName
    has been drawn/painted on the image.
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.returnListImagesWithMasks called&#34;)
    try:
        listImagesWithMasks = []
        if regionName in self.dictMasks: 
            maskList = self.dictMasks[regionName]
            for i in range(self.NumOfImages):
               mask = self.dictMasks[regionName][i]
               if mask.any():
                    listImagesWithMasks.append(i)
       
        return listImagesWithMasks

    except Exception as e:
        print(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))
        logger.error(&#39;Error in ROI_Storage.returnListImagesWithMasks: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.setPreviousRegionName"><code class="name flex">
<span>def <span class="ident">setPreviousRegionName</span></span>(<span>self, regionName)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the value of the property prevRegionName to the input argument, regionName.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setPreviousRegionName(self, regionName):
    &#34;&#34;&#34;
    Sets the value of the property prevRegionName to the input argument, regionName.
    &#34;&#34;&#34;
    logger.info(&#34;ROI_Storage.setPreviousRegionName called&#34;)
    self.prevRegionName = regionName</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI" href="index.html">Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs">ROIs</a></code></h4>
<ul class="">
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.addMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.addMask">addMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.createListOfBlankMasks" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.createListOfBlankMasks">createListOfBlankMasks</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.deleteMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.deleteMask">deleteMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getListOfRegions" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getListOfRegions">getListOfRegions</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getMask">getMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getNextRegionName" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getNextRegionName">getNextRegionName</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getUpdatedMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.getUpdatedMask">getUpdatedMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasImageGotMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasImageGotMask">hasImageGotMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasRegionGotMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.hasRegionGotMask">hasRegionGotMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.printContentsDictMasks" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.printContentsDictMasks">printContentsDictMasks</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.renameDictionaryKey" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.renameDictionaryKey">renameDictionaryKey</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.replaceMask" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.replaceMask">replaceMask</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.resetRegionNumber" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.resetRegionNumber">resetRegionNumber</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.returnListImagesWithMasks" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.returnListImagesWithMasks">returnListImagesWithMasks</a></code></li>
<li><code><a title="Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.setPreviousRegionName" href="#Weasel.Displays.ImageViewers.ComponentsUI.FreeHandROI.ROI_Storage.ROIs.setPreviousRegionName">setPreviousRegionName</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>