<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from PyQt5.QtCore import (QRectF, QRect, QPoint, Qt)
from PyQt5 import QtGui, QtCore
from PyQt5.QtGui import (QPainter, QPixmap, QColor, QImage, QCursor, qRgb)
from PyQt5.QtWidgets import  QGraphicsObject, QApplication, QMenu, QAction
import numpy as np
from scipy.stats import iqr
from numpy import nanmin, nanmax
from matplotlib.path import Path as MplPath
import sys
from .HelperFunctions import *
from .Resources import * 
import DICOM.ReadDICOM_Image as ReadDICOM_Image
from time import sleep
np.set_printoptions(threshold=sys.maxsize)
import logging
logger = logging.getLogger(__name__)

__version__ = &#39;1.0&#39;
__author__ = &#39;Steve Shillitoe&#39;
#October/November 2020


class GraphicsItem(QGraphicsObject):
    #sub classing QGraphicsObject rather than more logical QGraphicsItem
    #because QGraphicsObject can emit signals but QGraphicsItem cannot
    sigMouseHovered = QtCore.Signal(bool)
    sigGetDetailsROI = QtCore.Signal()
    sigRecalculateMeanROI = QtCore.Signal()
    sigZoomIn = QtCore.Signal()
    sigZoomOut = QtCore.Signal()

    def __init__(self, pixelArray, roi, path, linkToGraphicsView): 
        super(GraphicsItem, self).__init__()
        logger.info(&#34;GraphicsItem initialised&#34;)
        self.pixelArray = pixelArray
        if path is not None:
            minValue, maxValue = readLevels(path, self.pixelArray)
        else:
            minValue, maxValue = self.__quickMinMax(self.pixelArray)
        self.linkToGraphicsView = linkToGraphicsView
        self.contrast = maxValue - minValue
        self.intensity = minValue + (maxValue - minValue)/2
        imgData, alpha = makeARGB(data=self.pixelArray, levels=[minValue, maxValue])
        self.origQimage = makeQImage(imgData, alpha)
        self.qimage = makeQImage(imgData, alpha)
        self.mask = None
        if roi is not None:
            #add roi to pixel map
            self.addROItoImage(roi)
            self.mask = roi
        self.pixMap = QPixmap.fromImage(self.qimage)
        self.width = float(self.pixMap.width()) 
        self.height = float(self.pixMap.height())
        self.last_x, self.last_y = None, None
        self.start_x = None
        self.start_y = None
        #self.originRectX = None
        #self.originRectY = None
        self.pathCoordsList = []
        self.prevPathCoordsList = []
        self.setAcceptHoverEvents(True)
        self.listROICoords = None
        self.xMouseCoord  = None
        self.yMouseCoord  = None
        self.pixelColour = None
        self.pixelValue = None
        self.mouseMoved = False
        self.drawEnabled = False
        self.paintEnabled = False
        self.eraseEnabled = False
        self.zoomEnabled = False
        self.pixelSquareSize = 1
        #self.setToolTip(&#34;Use the mouse wheel to zoom&#34;)


    def __repr__(self):
       return &#39;{}&#39;.format(
           self.__class__.__name__)


    def updateImageLevels(self, intensity, contrast, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.updateImageLevels called&#34;)
        try:
            minValue = intensity - (contrast/2)
            maxValue = contrast + minValue
            imgData, alpha = makeARGB(data=self.pixelArray, levels=[minValue, maxValue])
            self.qimage = makeQImage(imgData, alpha)
            self.pixMap = QPixmap.fromImage(self.qimage)

            #Need to reapply mask
            if roi is not None and roi.any():
                self.reloadMask(roi)

            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))


    def paint(self, painter, option, widget):
        logger.info(&#34;FreeHandROI.GraphicsItem.paint called&#34;)
        try:
            painter.setOpacity(1)
            painter.drawPixmap(0,0, self.width, self.height, self.pixMap)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))
        

    def boundingRect(self): 
        logger.info(&#34;FreeHandROI.GraphicsItem.boundingRect called&#34;)
        return QRectF(0,0,self.width, self.height)


    def __quickMinMax(self, data):
        &#34;&#34;&#34;
        Estimate the min/max values of *data* by subsampling.
        &#34;&#34;&#34;
        logger.info(&#34;FreeHandROI.GraphicsItem.__quickMinMax called&#34;)
        try:
            while data.size &gt; 1e6:
                ax = np.argmax(data.shape)
                sl = [slice(None)] * data.ndim
                sl[ax] = slice(None, None, 2)
                data = data[sl]
            return nanmin(data), nanmax(data)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.__quickMinMax: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.__quickMinMax: &#39; + str(e))


    def hoverEnterEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverEnterEvent called&#34;)
        try:
            if self.drawEnabled:
                pm = QPixmap(PEN_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.eraseEnabled:
                pm = QPixmap(ERASER_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.paintEnabled:
                pm = QPixmap(BRUSH_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.zoomEnabled:
                pm = QPixmap(MAGNIFYING_GLASS_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))


    def hoverLeaveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverLeaveEvent called&#34;)
        try:
            QApplication.setOverrideCursor(QCursor(Qt.ArrowCursor))
            self.sigMouseHovered.emit(False)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))


    def hoverMoveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverMoveEvent called&#34;)
        try:
            self.xMouseCoord = int(event.pos().x())
            self.yMouseCoord = int(event.pos().y())
            self.pixelColour = self.origQimage.pixelColor(self.xMouseCoord,  self.yMouseCoord ).getRgb()[:-1]
            self.pixelValue = self.pixelArray[self.xMouseCoord, self.yMouseCoord]
            self.sigMouseHovered.emit(True)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))
       

    def drawROIBoundary(self):
        if self.last_x is None: # First event.
            self.last_x = self.xMouseCoord
            self.last_y = self.yMouseCoord
            self.start_x = self.xMouseCoord
            self.start_y = self.yMouseCoord
            return #  Ignore the first time.
        self.drawStraightLine(self.last_x, self.last_y, 
                              self.xMouseCoord, self.yMouseCoord)
        # Update the origin for next time.
        self.last_x = self.xMouseCoord
        self.last_y = self.yMouseCoord
        #Do not add duplicates to the list
        if [self.last_x, self.last_y] not in self.pathCoordsList:
            self.pathCoordsList.append([self.last_x, self.last_y])
        self.mouseMoved = True


    def mouseMoveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mouseMoveEvent called&#34;)
        try:
            buttons = event.buttons()
            if (buttons == Qt.LeftButton):
                self.xMouseCoord = int(event.pos().x())
                self.yMouseCoord = int(event.pos().y())
                
                if self.drawEnabled:
                    self.drawROIBoundary()

                if self.eraseEnabled:
                    self.eraseROI()

                if self.paintEnabled:
                    self.paintROI()

        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))

    
    def closeAndFillROI(self):
        if  (self.last_x != None and self.start_x != None 
                and self.last_y != None and self.start_y != None):
            if int(self.last_x) == self.start_x and int(self.last_y) == self.start_y:
                #free hand drawn ROI is closed, so no further action needed
                pass
            else:
                #free hand drawn ROI is not closed, so need to draw a
                #straight line from the coordinates of its start to
                #the coordinates of its last point
                self.drawStraightLine(self.last_x, self.last_y, self.start_x, self.start_y)
        
            self.prevPathCoordsList = self.pathCoordsList
            self.createMaskFromDrawnROI(self.pathCoordsList)
            #store mask
            self.sigGetDetailsROI.emit()
            self.linkToGraphicsView.dictROIs.addMask(self.mask)
            self.sigRecalculateMeanROI.emit()
            
            self.listROICoords = self.getListRoiInnerPoints(self.mask)
            self.fillFreeHandRoi()
            self.start_x = None 
            self.start_y = None
            self.last_x = None
            self.last_y = None
            self.pathCoordsList = []
            self.mouseMoved = False

    def mouseReleaseEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mouseReleaseEvent called&#34;)
        try:
            #Get the coordinates of the cursor
            self.xMouseCoord = int(event.pos().x())
            self.yMouseCoord = int(event.pos().y())
            button = event.button()
            if (button == Qt.LeftButton):
                if self.drawEnabled:
                    if self.mouseMoved:
                        self.closeAndFillROI()
                    else:
                        #The mouse was not moved, so a pixel was clicked on
                        if self.mask is not None:
                            if self.mask[self.xMouseCoord, self.yMouseCoord] == True:
                                pass
                                #mask already exists at this pixel, 
                                #so do nothing
                            else:
                                #update mask
                                self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                                self.mask[self.xMouseCoord, self.yMouseCoord] = True
                                #store mask
                                self.sigGetDetailsROI.emit()
                                self.linkToGraphicsView.dictROIs.addMask(self.mask)
                                self.sigRecalculateMeanROI.emit()
                        else:
                            self.createBlankMask() #create a new boolean mask with all values False
                            self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                            self.mask[self.xMouseCoord, self.yMouseCoord] = True
                            #store mask
                            self.sigGetDetailsROI.emit()
                            self.linkToGraphicsView.dictROIs.addMask(self.mask)
                            self.sigRecalculateMeanROI.emit()

                if self.eraseEnabled:
                    self.eraseROI()
                        
                if self.paintEnabled:
                    self.paintROI()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))


    def paintROI(self):
        if self.mask is None:
            self.createBlankMask()

        if self.pixelSquareSize == 1:
            self.mask[self.xMouseCoord, self.yMouseCoord] = True
            self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
        else:
            increment = (self.pixelSquareSize - 1)/2
            lowX = int(self.xMouseCoord - increment)
            highX = int(self.xMouseCoord + increment)
            lowY = int(self.yMouseCoord - increment)
            highY = int(self.yMouseCoord + increment)
            
            for x in range(lowX, highX+1, 1):
                for y in range(lowY, highY+1, 1):
                    if x &gt; -1 and  y &gt; -1:
                        self.mask[x, y] = True
                        self.setPixelToRed(x, y)    
        self.update()
        self.sigGetDetailsROI.emit()
        self.linkToGraphicsView.dictROIs.addMask(self.mask)
        self.sigRecalculateMeanROI.emit()


    def eraseROI(self):
        #erase mask at this mouse pointer position
        #and set pixel back to original value
        if self.mask is not None:
            if self.pixelSquareSize == 1:
                self.resetPixel(self.xMouseCoord, self.yMouseCoord)
                self.mask[self.xMouseCoord, self.yMouseCoord] = False
            else:
                increment = (self.pixelSquareSize - 1)/2
                lowX = int(self.xMouseCoord - increment)
                highX = int(self.xMouseCoord + increment)
                lowY = int(self.yMouseCoord - increment)
                highY = int(self.yMouseCoord + increment)
            
                for x in range(lowX, highX+1, 1):
                    for y in range(lowY, highY+1, 1):
                        if x &gt; -1 and  y &gt; -1:
                            self.resetPixel(x, y)
                            self.mask[x, y] = False
                            
            self.sigGetDetailsROI.emit()
            #update existing mask
            self.linkToGraphicsView.dictROIs.replaceMask(self.mask)
            self.sigRecalculateMeanROI.emit()


    def resetPixel(self, x, y):
        logger.info(&#34;FreeHandROI.GraphicsItem.resetPixel called&#34;)
        try:
            pixelColour = self.origQimage.pixel(x, y) 
            pixelRGB =  QColor(pixelColour).getRgb()
            redVal = pixelRGB[0]
            greenVal = pixelRGB[1]
            blueVal = pixelRGB[2]
            value = qRgb(redVal, greenVal, blueVal)
            self.qimage.setPixel(x, y, value)
            #convert QImage to QPixmap to be able to update image
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))
    

    def setPixelToRed(self, x, y):
        logger.info(&#34;FreeHandROI.GraphicsItem.setPixelToRed called&#34;)
        try:
            pixelColour = self.qimage.pixel(x, y) 
            pixelRGB =  QColor(pixelColour).getRgb()
            redVal = pixelRGB[0]
            greenVal = pixelRGB[1]
            blueVal = pixelRGB[2]
            if greenVal == 255 and blueVal == 255:
                #This pixel would be white if red channel set to 255
                #so set the green and blue channels to zero
                greenVal = blueVal = 0
            value = qRgb(255, greenVal, blueVal)
            self.qimage.setPixel(x, y, value)
            #convert QImage to QPixmap to be able to update image
            #with filled ROI
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))


    def drawStraightLine(self, startX, startY, endX, endY, colour=&#39;red&#39;):
        logger.info(&#34;FreeHandROI.GraphicsItem.drawStraightLine called&#34;)
        try:
            objPainter = QPainter(self.pixMap)
            objPen = objPainter.pen()
            objPen.setWidth(1) #1 pixel
            if colour == &#39;red&#39;:
                objPen.setColor(QColor(&#34;#FF0000&#34;)) #red
            else:
                objPen.setColor(QColor(&#34;#0000FF&#34;)) #blue
            objPainter.setPen(objPen)
            #self.objPainter.setRenderHint(QPainter.Antialiasing)
            objPainter.drawLine(startX, startY, endX, endY)
            objPainter.end()
            self.qimage =  self.pixMap.toImage()
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))


    def reloadImage(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.reloadImage called&#34;)
        try:
            self.qimage = None
            self.pixMap = None
            self.qimage = self.origQimage
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))


    def reloadMask(self, mask):
        logger.info(&#34;FreeHandROI.GraphicsItem.reloadMask called&#34;)
        try:
            #redisplays the ROI represented by mask
            self.listROICoords = self.getListRoiInnerPoints(mask)
            self.fillFreeHandRoi()
            self.listROICoords = []
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))


    def fillFreeHandRoi(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.fillFreeHandRoi called&#34;)
        try:
            if self.listROICoords is not None:
                for coords in self.listROICoords:
                    x = coords[0]
                    y = coords[1]
                    self.setPixelToRed(x, y)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))


    def addROItoImage(self, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.addROItoImage called&#34;)
        try:
            listROICoords = self.getListRoiInnerPoints(roi)
            if listROICoords is not None:
                for coords in listROICoords:
                    x = coords[0]
                    y = coords[1]
                    pixelColour = self.qimage.pixel(x, y) 
                    pixelRGB =  QColor(pixelColour).getRgb()
                    redVal = pixelRGB[0]
                    greenVal = pixelRGB[1]
                    blueVal = pixelRGB[2]
                    if greenVal == 255 and blueVal == 255:
                        #This pixel would be white if red channel set to 255
                        #so set the green and blue channels to zero
                        greenVal = blueVal = 0
                    value = qRgb(255, greenVal, blueVal)
                    self.qimage.setPixel(x, y, value)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))


    def setROIPathColour(self, colour, listPathCoords):
        &#34;&#34;&#34;This function is not currently used &#34;&#34;&#34;
        logger.info(&#34;FreeHandROI.GraphicsItem.setROIPathColour called&#34;)
        try:
            if listPathCoords is not None:
                for coords in listPathCoords:
                    x = coords[0]
                    y = coords[1]

                    pixelColour = self.qimage.pixel(x, y) 
                    pixelRGB =  QColor(pixelColour).getRgb()
                    redVal = pixelRGB[0]
                    greenVal = pixelRGB[1]
                    blueVal = pixelRGB[2]
                    if greenVal == 255 and blueVal == 255:
                        #This pixel would be white if red channel set to 255
                        #so set the green and blue channels to zero
                        greenVal = blueVal = 0
                    value = qRgb(255, greenVal, blueVal)

                    self.qimage.setPixel(x, y, value)
                    #convert QImage to QPixmap to be able to update image
                    #with filled ROI
                    self.pixMap = QPixmap.fromImage(self.qimage)
                    self.update()

                    #Test if the ROI was not closed when drawn,
                    #so it was closed with a staight line.
                    lastIndex = len(listPathCoords)-1
                    startX = listPathCoords[0][0]
                    startY = listPathCoords[0][1]
                    endX = listPathCoords[lastIndex][0]
                    endY = listPathCoords[lastIndex][1]
                    if int(endX) != int(startX) and int(endY) != int(startY):
                        #free hand drawn ROI is not closed, 
                        #so draw a straight line between start and end points
                        self.drawStraightLine(startX, startY, endX, endY, colour=colour)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))


    def getRoiMeanAndStd(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.getRoiMeanAndStd called&#34;)
        mean = round(np.mean(np.extract(self.mask, self.pixelArray)), 3)
        std = round(np.std(np.extract(self.mask, self.pixelArray)), 3)
        return mean, std


    def getMaskData(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.getMaskData called&#34;)
        return self.mask


    def getListRoiInnerPoints(self, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.getListRoiInnerPoints called&#34;)
        try:
            if roi is not None:
                result = np.where(roi == True)
                return list(zip(result[1], result[0]))
            else:
                return None
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))


    def createBlankMask(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.createBlankMask called&#34;)
        ny, nx = np.shape(self.pixelArray)
        self.mask = np.full((nx, ny), False, dtype=bool)


    def createMaskFromDrawnROI(self, roiBoundaryCoords):
        logger.info(&#34;FreeHandROI.GraphicsItem.createMaskFromDrawnROI called&#34;)
        try:
            self.mask = None
            #1. Create a list called points
            # of x,y coordinates for each element 
            #in self.pixelArray, the pixel array of the DICOM image
            nx, ny = np.shape(self.pixelArray)
            x, y = np.meshgrid(np.arange(nx), np.arange(ny))
            points = list(zip(x.flatten(),y.flatten()))

            #2. Convert the ROI boundary coordinates into a path object
            roiPath = MplPath(roiBoundaryCoords, closed=True)

            #3.Create a boolean array representing the original pixel array
            #with all elements set to False except those falling within the
            #ROI that are set to True.  
            #Setting radius=0.1 includes the drawn boundary in the ROI
            #ideally radius should = pixel size
            self.mask = roiPath.contains_points(points, radius=0.1).reshape((ny, nx))
            result = np.where(self.mask == True) 
            print(&#34;true coords ={}&#34;.format(list(zip(result[0], result[1])) ))

        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))
            

    def mousePressEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mousePressEvent called&#34;)
        try:
            button = event.button()
            if (button == Qt.LeftButton):
              self.sigZoomIn.emit()
            elif (button == Qt.RightButton): 
              self.sigZoomOut.emit()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))


def readLevels(path, pixelArray): 
        &#34;&#34;&#34;Reads levels directly from the DICOM image&#34;&#34;&#34;
        try:
            logger.info(&#34;GraphicsItem.readLevels called&#34;)
            #set default values
            centre = -1 
            width = -1 
            maximumValue = -1  
            minimumValue = -1 
            dataset = ReadDICOM_Image.getDicomDataset(path)
            if dataset and hasattr(dataset, &#39;WindowCenter&#39;) and hasattr(dataset, &#39;WindowWidth&#39;):
                slope = float(getattr(dataset, &#39;RescaleSlope&#39;, 1))
                intercept = float(getattr(dataset, &#39;RescaleIntercept&#39;, 0))
                centre = dataset.WindowCenter # * slope + intercept
                width = dataset.WindowWidth # * slope
                if [0x2005, 0x100E] in dataset: # &#39;Philips Rescale Slope&#39;
                    centre = centre / dataset[(0x2005, 0x100E)].value
                    width = width / dataset[(0x2005, 0x100E)].value
                maximumValue = centre + width/2
                minimumValue = centre - width/2
            elif dataset and hasattr(dataset, &#39;PerFrameFunctionalGroupsSequence&#39;):
                # In Enhanced MRIs, this display will retrieve the centre and width values of the first slice
                slope = dataset.PerFrameFunctionalGroupsSequence[0].PixelValueTransformationSequence[0].RescaleSlope
                intercept = dataset.PerFrameFunctionalGroupsSequence[0].PixelValueTransformationSequence[0].RescaleIntercept
                centre = dataset.PerFrameFunctionalGroupsSequence[0].FrameVOILUTSequence[0].WindowCenter # * slope + intercept
                width = dataset.PerFrameFunctionalGroupsSequence[0].FrameVOILUTSequence[0].WindowWidth # * slope
                if [0x2005, 0x100E] in dataset: # &#39;Philips Rescale Slope&#39;
                    centre = centre / dataset[(0x2005, 0x100E)].value
                    width = width / dataset[(0x2005, 0x100E)].value
                maximumValue = centre + width/2
                minimumValue = centre - width/2 
            else:
                minimumValue = np.amin(pixelArray) if (np.median(pixelArray) - iqr(pixelArray, rng=(
                1, 99))/2) &lt; np.amin(pixelArray) else np.median(pixelArray) - iqr(pixelArray, rng=(1, 99))/2
                maximumValue = np.amax(pixelArray) if (np.median(pixelArray) + iqr(pixelArray, rng=(
                1, 99))/2) &gt; np.amax(pixelArray) else np.median(pixelArray) + iqr(pixelArray, rng=(1, 99))/2
                centre = minimumValue + (abs(maximumValue) - abs(minimumValue))/2
                width = maximumValue - abs(minimumValue)

            return minimumValue, maximumValue
        except Exception as e:
            print(&#39;Error in GraphicsItem.readLevels: &#39; + str(e))
            logger.error(&#39;Error in GraphicsItem.readLevels: &#39; + str(e))

       </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.readLevels"><code class="name flex">
<span>def <span class="ident">readLevels</span></span>(<span>path, pixelArray)</span>
</code></dt>
<dd>
<div class="desc"><p>Reads levels directly from the DICOM image</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def readLevels(path, pixelArray): 
        &#34;&#34;&#34;Reads levels directly from the DICOM image&#34;&#34;&#34;
        try:
            logger.info(&#34;GraphicsItem.readLevels called&#34;)
            #set default values
            centre = -1 
            width = -1 
            maximumValue = -1  
            minimumValue = -1 
            dataset = ReadDICOM_Image.getDicomDataset(path)
            if dataset and hasattr(dataset, &#39;WindowCenter&#39;) and hasattr(dataset, &#39;WindowWidth&#39;):
                slope = float(getattr(dataset, &#39;RescaleSlope&#39;, 1))
                intercept = float(getattr(dataset, &#39;RescaleIntercept&#39;, 0))
                centre = dataset.WindowCenter # * slope + intercept
                width = dataset.WindowWidth # * slope
                if [0x2005, 0x100E] in dataset: # &#39;Philips Rescale Slope&#39;
                    centre = centre / dataset[(0x2005, 0x100E)].value
                    width = width / dataset[(0x2005, 0x100E)].value
                maximumValue = centre + width/2
                minimumValue = centre - width/2
            elif dataset and hasattr(dataset, &#39;PerFrameFunctionalGroupsSequence&#39;):
                # In Enhanced MRIs, this display will retrieve the centre and width values of the first slice
                slope = dataset.PerFrameFunctionalGroupsSequence[0].PixelValueTransformationSequence[0].RescaleSlope
                intercept = dataset.PerFrameFunctionalGroupsSequence[0].PixelValueTransformationSequence[0].RescaleIntercept
                centre = dataset.PerFrameFunctionalGroupsSequence[0].FrameVOILUTSequence[0].WindowCenter # * slope + intercept
                width = dataset.PerFrameFunctionalGroupsSequence[0].FrameVOILUTSequence[0].WindowWidth # * slope
                if [0x2005, 0x100E] in dataset: # &#39;Philips Rescale Slope&#39;
                    centre = centre / dataset[(0x2005, 0x100E)].value
                    width = width / dataset[(0x2005, 0x100E)].value
                maximumValue = centre + width/2
                minimumValue = centre - width/2 
            else:
                minimumValue = np.amin(pixelArray) if (np.median(pixelArray) - iqr(pixelArray, rng=(
                1, 99))/2) &lt; np.amin(pixelArray) else np.median(pixelArray) - iqr(pixelArray, rng=(1, 99))/2
                maximumValue = np.amax(pixelArray) if (np.median(pixelArray) + iqr(pixelArray, rng=(
                1, 99))/2) &gt; np.amax(pixelArray) else np.median(pixelArray) + iqr(pixelArray, rng=(1, 99))/2
                centre = minimumValue + (abs(maximumValue) - abs(minimumValue))/2
                width = maximumValue - abs(minimumValue)

            return minimumValue, maximumValue
        except Exception as e:
            print(&#39;Error in GraphicsItem.readLevels: &#39; + str(e))
            logger.error(&#39;Error in GraphicsItem.readLevels: &#39; + str(e))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem"><code class="flex name class">
<span>class <span class="ident">GraphicsItem</span></span>
<span>(</span><span>pixelArray, roi, path, linkToGraphicsView)</span>
</code></dt>
<dd>
<div class="desc"><p>QGraphicsObject(parent: QGraphicsItem = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GraphicsItem(QGraphicsObject):
    #sub classing QGraphicsObject rather than more logical QGraphicsItem
    #because QGraphicsObject can emit signals but QGraphicsItem cannot
    sigMouseHovered = QtCore.Signal(bool)
    sigGetDetailsROI = QtCore.Signal()
    sigRecalculateMeanROI = QtCore.Signal()
    sigZoomIn = QtCore.Signal()
    sigZoomOut = QtCore.Signal()

    def __init__(self, pixelArray, roi, path, linkToGraphicsView): 
        super(GraphicsItem, self).__init__()
        logger.info(&#34;GraphicsItem initialised&#34;)
        self.pixelArray = pixelArray
        if path is not None:
            minValue, maxValue = readLevels(path, self.pixelArray)
        else:
            minValue, maxValue = self.__quickMinMax(self.pixelArray)
        self.linkToGraphicsView = linkToGraphicsView
        self.contrast = maxValue - minValue
        self.intensity = minValue + (maxValue - minValue)/2
        imgData, alpha = makeARGB(data=self.pixelArray, levels=[minValue, maxValue])
        self.origQimage = makeQImage(imgData, alpha)
        self.qimage = makeQImage(imgData, alpha)
        self.mask = None
        if roi is not None:
            #add roi to pixel map
            self.addROItoImage(roi)
            self.mask = roi
        self.pixMap = QPixmap.fromImage(self.qimage)
        self.width = float(self.pixMap.width()) 
        self.height = float(self.pixMap.height())
        self.last_x, self.last_y = None, None
        self.start_x = None
        self.start_y = None
        #self.originRectX = None
        #self.originRectY = None
        self.pathCoordsList = []
        self.prevPathCoordsList = []
        self.setAcceptHoverEvents(True)
        self.listROICoords = None
        self.xMouseCoord  = None
        self.yMouseCoord  = None
        self.pixelColour = None
        self.pixelValue = None
        self.mouseMoved = False
        self.drawEnabled = False
        self.paintEnabled = False
        self.eraseEnabled = False
        self.zoomEnabled = False
        self.pixelSquareSize = 1
        #self.setToolTip(&#34;Use the mouse wheel to zoom&#34;)


    def __repr__(self):
       return &#39;{}&#39;.format(
           self.__class__.__name__)


    def updateImageLevels(self, intensity, contrast, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.updateImageLevels called&#34;)
        try:
            minValue = intensity - (contrast/2)
            maxValue = contrast + minValue
            imgData, alpha = makeARGB(data=self.pixelArray, levels=[minValue, maxValue])
            self.qimage = makeQImage(imgData, alpha)
            self.pixMap = QPixmap.fromImage(self.qimage)

            #Need to reapply mask
            if roi is not None and roi.any():
                self.reloadMask(roi)

            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))


    def paint(self, painter, option, widget):
        logger.info(&#34;FreeHandROI.GraphicsItem.paint called&#34;)
        try:
            painter.setOpacity(1)
            painter.drawPixmap(0,0, self.width, self.height, self.pixMap)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))
        

    def boundingRect(self): 
        logger.info(&#34;FreeHandROI.GraphicsItem.boundingRect called&#34;)
        return QRectF(0,0,self.width, self.height)


    def __quickMinMax(self, data):
        &#34;&#34;&#34;
        Estimate the min/max values of *data* by subsampling.
        &#34;&#34;&#34;
        logger.info(&#34;FreeHandROI.GraphicsItem.__quickMinMax called&#34;)
        try:
            while data.size &gt; 1e6:
                ax = np.argmax(data.shape)
                sl = [slice(None)] * data.ndim
                sl[ax] = slice(None, None, 2)
                data = data[sl]
            return nanmin(data), nanmax(data)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.__quickMinMax: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.__quickMinMax: &#39; + str(e))


    def hoverEnterEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverEnterEvent called&#34;)
        try:
            if self.drawEnabled:
                pm = QPixmap(PEN_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.eraseEnabled:
                pm = QPixmap(ERASER_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.paintEnabled:
                pm = QPixmap(BRUSH_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
            if self.zoomEnabled:
                pm = QPixmap(MAGNIFYING_GLASS_CURSOR)
                cursor = QCursor(pm, hotX=0, hotY=30)
                QApplication.setOverrideCursor(cursor)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))


    def hoverLeaveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverLeaveEvent called&#34;)
        try:
            QApplication.setOverrideCursor(QCursor(Qt.ArrowCursor))
            self.sigMouseHovered.emit(False)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))


    def hoverMoveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.hoverMoveEvent called&#34;)
        try:
            self.xMouseCoord = int(event.pos().x())
            self.yMouseCoord = int(event.pos().y())
            self.pixelColour = self.origQimage.pixelColor(self.xMouseCoord,  self.yMouseCoord ).getRgb()[:-1]
            self.pixelValue = self.pixelArray[self.xMouseCoord, self.yMouseCoord]
            self.sigMouseHovered.emit(True)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))
       

    def drawROIBoundary(self):
        if self.last_x is None: # First event.
            self.last_x = self.xMouseCoord
            self.last_y = self.yMouseCoord
            self.start_x = self.xMouseCoord
            self.start_y = self.yMouseCoord
            return #  Ignore the first time.
        self.drawStraightLine(self.last_x, self.last_y, 
                              self.xMouseCoord, self.yMouseCoord)
        # Update the origin for next time.
        self.last_x = self.xMouseCoord
        self.last_y = self.yMouseCoord
        #Do not add duplicates to the list
        if [self.last_x, self.last_y] not in self.pathCoordsList:
            self.pathCoordsList.append([self.last_x, self.last_y])
        self.mouseMoved = True


    def mouseMoveEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mouseMoveEvent called&#34;)
        try:
            buttons = event.buttons()
            if (buttons == Qt.LeftButton):
                self.xMouseCoord = int(event.pos().x())
                self.yMouseCoord = int(event.pos().y())
                
                if self.drawEnabled:
                    self.drawROIBoundary()

                if self.eraseEnabled:
                    self.eraseROI()

                if self.paintEnabled:
                    self.paintROI()

        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))

    
    def closeAndFillROI(self):
        if  (self.last_x != None and self.start_x != None 
                and self.last_y != None and self.start_y != None):
            if int(self.last_x) == self.start_x and int(self.last_y) == self.start_y:
                #free hand drawn ROI is closed, so no further action needed
                pass
            else:
                #free hand drawn ROI is not closed, so need to draw a
                #straight line from the coordinates of its start to
                #the coordinates of its last point
                self.drawStraightLine(self.last_x, self.last_y, self.start_x, self.start_y)
        
            self.prevPathCoordsList = self.pathCoordsList
            self.createMaskFromDrawnROI(self.pathCoordsList)
            #store mask
            self.sigGetDetailsROI.emit()
            self.linkToGraphicsView.dictROIs.addMask(self.mask)
            self.sigRecalculateMeanROI.emit()
            
            self.listROICoords = self.getListRoiInnerPoints(self.mask)
            self.fillFreeHandRoi()
            self.start_x = None 
            self.start_y = None
            self.last_x = None
            self.last_y = None
            self.pathCoordsList = []
            self.mouseMoved = False

    def mouseReleaseEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mouseReleaseEvent called&#34;)
        try:
            #Get the coordinates of the cursor
            self.xMouseCoord = int(event.pos().x())
            self.yMouseCoord = int(event.pos().y())
            button = event.button()
            if (button == Qt.LeftButton):
                if self.drawEnabled:
                    if self.mouseMoved:
                        self.closeAndFillROI()
                    else:
                        #The mouse was not moved, so a pixel was clicked on
                        if self.mask is not None:
                            if self.mask[self.xMouseCoord, self.yMouseCoord] == True:
                                pass
                                #mask already exists at this pixel, 
                                #so do nothing
                            else:
                                #update mask
                                self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                                self.mask[self.xMouseCoord, self.yMouseCoord] = True
                                #store mask
                                self.sigGetDetailsROI.emit()
                                self.linkToGraphicsView.dictROIs.addMask(self.mask)
                                self.sigRecalculateMeanROI.emit()
                        else:
                            self.createBlankMask() #create a new boolean mask with all values False
                            self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                            self.mask[self.xMouseCoord, self.yMouseCoord] = True
                            #store mask
                            self.sigGetDetailsROI.emit()
                            self.linkToGraphicsView.dictROIs.addMask(self.mask)
                            self.sigRecalculateMeanROI.emit()

                if self.eraseEnabled:
                    self.eraseROI()
                        
                if self.paintEnabled:
                    self.paintROI()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))


    def paintROI(self):
        if self.mask is None:
            self.createBlankMask()

        if self.pixelSquareSize == 1:
            self.mask[self.xMouseCoord, self.yMouseCoord] = True
            self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
        else:
            increment = (self.pixelSquareSize - 1)/2
            lowX = int(self.xMouseCoord - increment)
            highX = int(self.xMouseCoord + increment)
            lowY = int(self.yMouseCoord - increment)
            highY = int(self.yMouseCoord + increment)
            
            for x in range(lowX, highX+1, 1):
                for y in range(lowY, highY+1, 1):
                    if x &gt; -1 and  y &gt; -1:
                        self.mask[x, y] = True
                        self.setPixelToRed(x, y)    
        self.update()
        self.sigGetDetailsROI.emit()
        self.linkToGraphicsView.dictROIs.addMask(self.mask)
        self.sigRecalculateMeanROI.emit()


    def eraseROI(self):
        #erase mask at this mouse pointer position
        #and set pixel back to original value
        if self.mask is not None:
            if self.pixelSquareSize == 1:
                self.resetPixel(self.xMouseCoord, self.yMouseCoord)
                self.mask[self.xMouseCoord, self.yMouseCoord] = False
            else:
                increment = (self.pixelSquareSize - 1)/2
                lowX = int(self.xMouseCoord - increment)
                highX = int(self.xMouseCoord + increment)
                lowY = int(self.yMouseCoord - increment)
                highY = int(self.yMouseCoord + increment)
            
                for x in range(lowX, highX+1, 1):
                    for y in range(lowY, highY+1, 1):
                        if x &gt; -1 and  y &gt; -1:
                            self.resetPixel(x, y)
                            self.mask[x, y] = False
                            
            self.sigGetDetailsROI.emit()
            #update existing mask
            self.linkToGraphicsView.dictROIs.replaceMask(self.mask)
            self.sigRecalculateMeanROI.emit()


    def resetPixel(self, x, y):
        logger.info(&#34;FreeHandROI.GraphicsItem.resetPixel called&#34;)
        try:
            pixelColour = self.origQimage.pixel(x, y) 
            pixelRGB =  QColor(pixelColour).getRgb()
            redVal = pixelRGB[0]
            greenVal = pixelRGB[1]
            blueVal = pixelRGB[2]
            value = qRgb(redVal, greenVal, blueVal)
            self.qimage.setPixel(x, y, value)
            #convert QImage to QPixmap to be able to update image
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))
    

    def setPixelToRed(self, x, y):
        logger.info(&#34;FreeHandROI.GraphicsItem.setPixelToRed called&#34;)
        try:
            pixelColour = self.qimage.pixel(x, y) 
            pixelRGB =  QColor(pixelColour).getRgb()
            redVal = pixelRGB[0]
            greenVal = pixelRGB[1]
            blueVal = pixelRGB[2]
            if greenVal == 255 and blueVal == 255:
                #This pixel would be white if red channel set to 255
                #so set the green and blue channels to zero
                greenVal = blueVal = 0
            value = qRgb(255, greenVal, blueVal)
            self.qimage.setPixel(x, y, value)
            #convert QImage to QPixmap to be able to update image
            #with filled ROI
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))


    def drawStraightLine(self, startX, startY, endX, endY, colour=&#39;red&#39;):
        logger.info(&#34;FreeHandROI.GraphicsItem.drawStraightLine called&#34;)
        try:
            objPainter = QPainter(self.pixMap)
            objPen = objPainter.pen()
            objPen.setWidth(1) #1 pixel
            if colour == &#39;red&#39;:
                objPen.setColor(QColor(&#34;#FF0000&#34;)) #red
            else:
                objPen.setColor(QColor(&#34;#0000FF&#34;)) #blue
            objPainter.setPen(objPen)
            #self.objPainter.setRenderHint(QPainter.Antialiasing)
            objPainter.drawLine(startX, startY, endX, endY)
            objPainter.end()
            self.qimage =  self.pixMap.toImage()
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))


    def reloadImage(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.reloadImage called&#34;)
        try:
            self.qimage = None
            self.pixMap = None
            self.qimage = self.origQimage
            self.pixMap = QPixmap.fromImage(self.qimage)
            self.update()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))


    def reloadMask(self, mask):
        logger.info(&#34;FreeHandROI.GraphicsItem.reloadMask called&#34;)
        try:
            #redisplays the ROI represented by mask
            self.listROICoords = self.getListRoiInnerPoints(mask)
            self.fillFreeHandRoi()
            self.listROICoords = []
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))


    def fillFreeHandRoi(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.fillFreeHandRoi called&#34;)
        try:
            if self.listROICoords is not None:
                for coords in self.listROICoords:
                    x = coords[0]
                    y = coords[1]
                    self.setPixelToRed(x, y)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))


    def addROItoImage(self, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.addROItoImage called&#34;)
        try:
            listROICoords = self.getListRoiInnerPoints(roi)
            if listROICoords is not None:
                for coords in listROICoords:
                    x = coords[0]
                    y = coords[1]
                    pixelColour = self.qimage.pixel(x, y) 
                    pixelRGB =  QColor(pixelColour).getRgb()
                    redVal = pixelRGB[0]
                    greenVal = pixelRGB[1]
                    blueVal = pixelRGB[2]
                    if greenVal == 255 and blueVal == 255:
                        #This pixel would be white if red channel set to 255
                        #so set the green and blue channels to zero
                        greenVal = blueVal = 0
                    value = qRgb(255, greenVal, blueVal)
                    self.qimage.setPixel(x, y, value)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))


    def setROIPathColour(self, colour, listPathCoords):
        &#34;&#34;&#34;This function is not currently used &#34;&#34;&#34;
        logger.info(&#34;FreeHandROI.GraphicsItem.setROIPathColour called&#34;)
        try:
            if listPathCoords is not None:
                for coords in listPathCoords:
                    x = coords[0]
                    y = coords[1]

                    pixelColour = self.qimage.pixel(x, y) 
                    pixelRGB =  QColor(pixelColour).getRgb()
                    redVal = pixelRGB[0]
                    greenVal = pixelRGB[1]
                    blueVal = pixelRGB[2]
                    if greenVal == 255 and blueVal == 255:
                        #This pixel would be white if red channel set to 255
                        #so set the green and blue channels to zero
                        greenVal = blueVal = 0
                    value = qRgb(255, greenVal, blueVal)

                    self.qimage.setPixel(x, y, value)
                    #convert QImage to QPixmap to be able to update image
                    #with filled ROI
                    self.pixMap = QPixmap.fromImage(self.qimage)
                    self.update()

                    #Test if the ROI was not closed when drawn,
                    #so it was closed with a staight line.
                    lastIndex = len(listPathCoords)-1
                    startX = listPathCoords[0][0]
                    startY = listPathCoords[0][1]
                    endX = listPathCoords[lastIndex][0]
                    endY = listPathCoords[lastIndex][1]
                    if int(endX) != int(startX) and int(endY) != int(startY):
                        #free hand drawn ROI is not closed, 
                        #so draw a straight line between start and end points
                        self.drawStraightLine(startX, startY, endX, endY, colour=colour)
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))


    def getRoiMeanAndStd(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.getRoiMeanAndStd called&#34;)
        mean = round(np.mean(np.extract(self.mask, self.pixelArray)), 3)
        std = round(np.std(np.extract(self.mask, self.pixelArray)), 3)
        return mean, std


    def getMaskData(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.getMaskData called&#34;)
        return self.mask


    def getListRoiInnerPoints(self, roi):
        logger.info(&#34;FreeHandROI.GraphicsItem.getListRoiInnerPoints called&#34;)
        try:
            if roi is not None:
                result = np.where(roi == True)
                return list(zip(result[1], result[0]))
            else:
                return None
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))


    def createBlankMask(self):
        logger.info(&#34;FreeHandROI.GraphicsItem.createBlankMask called&#34;)
        ny, nx = np.shape(self.pixelArray)
        self.mask = np.full((nx, ny), False, dtype=bool)


    def createMaskFromDrawnROI(self, roiBoundaryCoords):
        logger.info(&#34;FreeHandROI.GraphicsItem.createMaskFromDrawnROI called&#34;)
        try:
            self.mask = None
            #1. Create a list called points
            # of x,y coordinates for each element 
            #in self.pixelArray, the pixel array of the DICOM image
            nx, ny = np.shape(self.pixelArray)
            x, y = np.meshgrid(np.arange(nx), np.arange(ny))
            points = list(zip(x.flatten(),y.flatten()))

            #2. Convert the ROI boundary coordinates into a path object
            roiPath = MplPath(roiBoundaryCoords, closed=True)

            #3.Create a boolean array representing the original pixel array
            #with all elements set to False except those falling within the
            #ROI that are set to True.  
            #Setting radius=0.1 includes the drawn boundary in the ROI
            #ideally radius should = pixel size
            self.mask = roiPath.contains_points(points, radius=0.1).reshape((ny, nx))
            result = np.where(self.mask == True) 
            print(&#34;true coords ={}&#34;.format(list(zip(result[0], result[1])) ))

        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))
            

    def mousePressEvent(self, event):
        logger.info(&#34;FreeHandROI.GraphicsItem.mousePressEvent called&#34;)
        try:
            button = event.button()
            if (button == Qt.LeftButton):
              self.sigZoomIn.emit()
            elif (button == Qt.RightButton): 
              self.sigZoomOut.emit()
        except Exception as e:
            print(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))
            logger.error(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QGraphicsObject</li>
<li>PyQt5.QtCore.QObject</li>
<li>PyQt5.QtWidgets.QGraphicsItem</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.addROItoImage"><code class="name flex">
<span>def <span class="ident">addROItoImage</span></span>(<span>self, roi)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addROItoImage(self, roi):
    logger.info(&#34;FreeHandROI.GraphicsItem.addROItoImage called&#34;)
    try:
        listROICoords = self.getListRoiInnerPoints(roi)
        if listROICoords is not None:
            for coords in listROICoords:
                x = coords[0]
                y = coords[1]
                pixelColour = self.qimage.pixel(x, y) 
                pixelRGB =  QColor(pixelColour).getRgb()
                redVal = pixelRGB[0]
                greenVal = pixelRGB[1]
                blueVal = pixelRGB[2]
                if greenVal == 255 and blueVal == 255:
                    #This pixel would be white if red channel set to 255
                    #so set the green and blue channels to zero
                    greenVal = blueVal = 0
                value = qRgb(255, greenVal, blueVal)
                self.qimage.setPixel(x, y, value)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.addROItoImage: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.boundingRect"><code class="name flex">
<span>def <span class="ident">boundingRect</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>boundingRect(self) -&gt; QRectF</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def boundingRect(self): 
    logger.info(&#34;FreeHandROI.GraphicsItem.boundingRect called&#34;)
    return QRectF(0,0,self.width, self.height)</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.closeAndFillROI"><code class="name flex">
<span>def <span class="ident">closeAndFillROI</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def closeAndFillROI(self):
    if  (self.last_x != None and self.start_x != None 
            and self.last_y != None and self.start_y != None):
        if int(self.last_x) == self.start_x and int(self.last_y) == self.start_y:
            #free hand drawn ROI is closed, so no further action needed
            pass
        else:
            #free hand drawn ROI is not closed, so need to draw a
            #straight line from the coordinates of its start to
            #the coordinates of its last point
            self.drawStraightLine(self.last_x, self.last_y, self.start_x, self.start_y)
    
        self.prevPathCoordsList = self.pathCoordsList
        self.createMaskFromDrawnROI(self.pathCoordsList)
        #store mask
        self.sigGetDetailsROI.emit()
        self.linkToGraphicsView.dictROIs.addMask(self.mask)
        self.sigRecalculateMeanROI.emit()
        
        self.listROICoords = self.getListRoiInnerPoints(self.mask)
        self.fillFreeHandRoi()
        self.start_x = None 
        self.start_y = None
        self.last_x = None
        self.last_y = None
        self.pathCoordsList = []
        self.mouseMoved = False</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createBlankMask"><code class="name flex">
<span>def <span class="ident">createBlankMask</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def createBlankMask(self):
    logger.info(&#34;FreeHandROI.GraphicsItem.createBlankMask called&#34;)
    ny, nx = np.shape(self.pixelArray)
    self.mask = np.full((nx, ny), False, dtype=bool)</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createMaskFromDrawnROI"><code class="name flex">
<span>def <span class="ident">createMaskFromDrawnROI</span></span>(<span>self, roiBoundaryCoords)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def createMaskFromDrawnROI(self, roiBoundaryCoords):
    logger.info(&#34;FreeHandROI.GraphicsItem.createMaskFromDrawnROI called&#34;)
    try:
        self.mask = None
        #1. Create a list called points
        # of x,y coordinates for each element 
        #in self.pixelArray, the pixel array of the DICOM image
        nx, ny = np.shape(self.pixelArray)
        x, y = np.meshgrid(np.arange(nx), np.arange(ny))
        points = list(zip(x.flatten(),y.flatten()))

        #2. Convert the ROI boundary coordinates into a path object
        roiPath = MplPath(roiBoundaryCoords, closed=True)

        #3.Create a boolean array representing the original pixel array
        #with all elements set to False except those falling within the
        #ROI that are set to True.  
        #Setting radius=0.1 includes the drawn boundary in the ROI
        #ideally radius should = pixel size
        self.mask = roiPath.contains_points(points, radius=0.1).reshape((ny, nx))
        result = np.where(self.mask == True) 
        print(&#34;true coords ={}&#34;.format(list(zip(result[0], result[1])) ))

    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.createMaskFromDrawnROI: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawROIBoundary"><code class="name flex">
<span>def <span class="ident">drawROIBoundary</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawROIBoundary(self):
    if self.last_x is None: # First event.
        self.last_x = self.xMouseCoord
        self.last_y = self.yMouseCoord
        self.start_x = self.xMouseCoord
        self.start_y = self.yMouseCoord
        return #  Ignore the first time.
    self.drawStraightLine(self.last_x, self.last_y, 
                          self.xMouseCoord, self.yMouseCoord)
    # Update the origin for next time.
    self.last_x = self.xMouseCoord
    self.last_y = self.yMouseCoord
    #Do not add duplicates to the list
    if [self.last_x, self.last_y] not in self.pathCoordsList:
        self.pathCoordsList.append([self.last_x, self.last_y])
    self.mouseMoved = True</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawStraightLine"><code class="name flex">
<span>def <span class="ident">drawStraightLine</span></span>(<span>self, startX, startY, endX, endY, colour='red')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawStraightLine(self, startX, startY, endX, endY, colour=&#39;red&#39;):
    logger.info(&#34;FreeHandROI.GraphicsItem.drawStraightLine called&#34;)
    try:
        objPainter = QPainter(self.pixMap)
        objPen = objPainter.pen()
        objPen.setWidth(1) #1 pixel
        if colour == &#39;red&#39;:
            objPen.setColor(QColor(&#34;#FF0000&#34;)) #red
        else:
            objPen.setColor(QColor(&#34;#0000FF&#34;)) #blue
        objPainter.setPen(objPen)
        #self.objPainter.setRenderHint(QPainter.Antialiasing)
        objPainter.drawLine(startX, startY, endX, endY)
        objPainter.end()
        self.qimage =  self.pixMap.toImage()
        self.update()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.drawStraightLine: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.eraseROI"><code class="name flex">
<span>def <span class="ident">eraseROI</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def eraseROI(self):
    #erase mask at this mouse pointer position
    #and set pixel back to original value
    if self.mask is not None:
        if self.pixelSquareSize == 1:
            self.resetPixel(self.xMouseCoord, self.yMouseCoord)
            self.mask[self.xMouseCoord, self.yMouseCoord] = False
        else:
            increment = (self.pixelSquareSize - 1)/2
            lowX = int(self.xMouseCoord - increment)
            highX = int(self.xMouseCoord + increment)
            lowY = int(self.yMouseCoord - increment)
            highY = int(self.yMouseCoord + increment)
        
            for x in range(lowX, highX+1, 1):
                for y in range(lowY, highY+1, 1):
                    if x &gt; -1 and  y &gt; -1:
                        self.resetPixel(x, y)
                        self.mask[x, y] = False
                        
        self.sigGetDetailsROI.emit()
        #update existing mask
        self.linkToGraphicsView.dictROIs.replaceMask(self.mask)
        self.sigRecalculateMeanROI.emit()</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.fillFreeHandRoi"><code class="name flex">
<span>def <span class="ident">fillFreeHandRoi</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fillFreeHandRoi(self):
    logger.info(&#34;FreeHandROI.GraphicsItem.fillFreeHandRoi called&#34;)
    try:
        if self.listROICoords is not None:
            for coords in self.listROICoords:
                x = coords[0]
                y = coords[1]
                self.setPixelToRed(x, y)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.fillFreeHandRoi: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getListRoiInnerPoints"><code class="name flex">
<span>def <span class="ident">getListRoiInnerPoints</span></span>(<span>self, roi)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getListRoiInnerPoints(self, roi):
    logger.info(&#34;FreeHandROI.GraphicsItem.getListRoiInnerPoints called&#34;)
    try:
        if roi is not None:
            result = np.where(roi == True)
            return list(zip(result[1], result[0]))
        else:
            return None
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.getListRoiInnerPoints: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getMaskData"><code class="name flex">
<span>def <span class="ident">getMaskData</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getMaskData(self):
    logger.info(&#34;FreeHandROI.GraphicsItem.getMaskData called&#34;)
    return self.mask</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getRoiMeanAndStd"><code class="name flex">
<span>def <span class="ident">getRoiMeanAndStd</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRoiMeanAndStd(self):
    logger.info(&#34;FreeHandROI.GraphicsItem.getRoiMeanAndStd called&#34;)
    mean = round(np.mean(np.extract(self.mask, self.pixelArray)), 3)
    std = round(np.std(np.extract(self.mask, self.pixelArray)), 3)
    return mean, std</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverEnterEvent"><code class="name flex">
<span>def <span class="ident">hoverEnterEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>hoverEnterEvent(self, QGraphicsSceneHoverEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hoverEnterEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.hoverEnterEvent called&#34;)
    try:
        if self.drawEnabled:
            pm = QPixmap(PEN_CURSOR)
            cursor = QCursor(pm, hotX=0, hotY=30)
            QApplication.setOverrideCursor(cursor)
        if self.eraseEnabled:
            pm = QPixmap(ERASER_CURSOR)
            cursor = QCursor(pm, hotX=0, hotY=30)
            QApplication.setOverrideCursor(cursor)
        if self.paintEnabled:
            pm = QPixmap(BRUSH_CURSOR)
            cursor = QCursor(pm, hotX=0, hotY=30)
            QApplication.setOverrideCursor(cursor)
        if self.zoomEnabled:
            pm = QPixmap(MAGNIFYING_GLASS_CURSOR)
            cursor = QCursor(pm, hotX=0, hotY=30)
            QApplication.setOverrideCursor(cursor)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverLeaveEvent"><code class="name flex">
<span>def <span class="ident">hoverLeaveEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>hoverLeaveEvent(self, QGraphicsSceneHoverEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hoverLeaveEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.hoverLeaveEvent called&#34;)
    try:
        QApplication.setOverrideCursor(QCursor(Qt.ArrowCursor))
        self.sigMouseHovered.emit(False)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverEnterEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverMoveEvent"><code class="name flex">
<span>def <span class="ident">hoverMoveEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>hoverMoveEvent(self, QGraphicsSceneHoverEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hoverMoveEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.hoverMoveEvent called&#34;)
    try:
        self.xMouseCoord = int(event.pos().x())
        self.yMouseCoord = int(event.pos().y())
        self.pixelColour = self.origQimage.pixelColor(self.xMouseCoord,  self.yMouseCoord ).getRgb()[:-1]
        self.pixelValue = self.pixelArray[self.xMouseCoord, self.yMouseCoord]
        self.sigMouseHovered.emit(True)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.hoverMoveEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseMoveEvent"><code class="name flex">
<span>def <span class="ident">mouseMoveEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>mouseMoveEvent(self, QGraphicsSceneMouseEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mouseMoveEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.mouseMoveEvent called&#34;)
    try:
        buttons = event.buttons()
        if (buttons == Qt.LeftButton):
            self.xMouseCoord = int(event.pos().x())
            self.yMouseCoord = int(event.pos().y())
            
            if self.drawEnabled:
                self.drawROIBoundary()

            if self.eraseEnabled:
                self.eraseROI()

            if self.paintEnabled:
                self.paintROI()

    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseMoveEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mousePressEvent"><code class="name flex">
<span>def <span class="ident">mousePressEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>mousePressEvent(self, QGraphicsSceneMouseEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mousePressEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.mousePressEvent called&#34;)
    try:
        button = event.button()
        if (button == Qt.LeftButton):
          self.sigZoomIn.emit()
        elif (button == Qt.RightButton): 
          self.sigZoomOut.emit()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.mousePressEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseReleaseEvent"><code class="name flex">
<span>def <span class="ident">mouseReleaseEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>mouseReleaseEvent(self, QGraphicsSceneMouseEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mouseReleaseEvent(self, event):
    logger.info(&#34;FreeHandROI.GraphicsItem.mouseReleaseEvent called&#34;)
    try:
        #Get the coordinates of the cursor
        self.xMouseCoord = int(event.pos().x())
        self.yMouseCoord = int(event.pos().y())
        button = event.button()
        if (button == Qt.LeftButton):
            if self.drawEnabled:
                if self.mouseMoved:
                    self.closeAndFillROI()
                else:
                    #The mouse was not moved, so a pixel was clicked on
                    if self.mask is not None:
                        if self.mask[self.xMouseCoord, self.yMouseCoord] == True:
                            pass
                            #mask already exists at this pixel, 
                            #so do nothing
                        else:
                            #update mask
                            self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                            self.mask[self.xMouseCoord, self.yMouseCoord] = True
                            #store mask
                            self.sigGetDetailsROI.emit()
                            self.linkToGraphicsView.dictROIs.addMask(self.mask)
                            self.sigRecalculateMeanROI.emit()
                    else:
                        self.createBlankMask() #create a new boolean mask with all values False
                        self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
                        self.mask[self.xMouseCoord, self.yMouseCoord] = True
                        #store mask
                        self.sigGetDetailsROI.emit()
                        self.linkToGraphicsView.dictROIs.addMask(self.mask)
                        self.sigRecalculateMeanROI.emit()

            if self.eraseEnabled:
                self.eraseROI()
                    
            if self.paintEnabled:
                self.paintROI()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.mouseReleaseEvent: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paint"><code class="name flex">
<span>def <span class="ident">paint</span></span>(<span>self, painter, option, widget)</span>
</code></dt>
<dd>
<div class="desc"><p>paint(self, QPainter, QStyleOptionGraphicsItem, widget: QWidget = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def paint(self, painter, option, widget):
    logger.info(&#34;FreeHandROI.GraphicsItem.paint called&#34;)
    try:
        painter.setOpacity(1)
        painter.drawPixmap(0,0, self.width, self.height, self.pixMap)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.paint: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paintROI"><code class="name flex">
<span>def <span class="ident">paintROI</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def paintROI(self):
    if self.mask is None:
        self.createBlankMask()

    if self.pixelSquareSize == 1:
        self.mask[self.xMouseCoord, self.yMouseCoord] = True
        self.setPixelToRed(self.xMouseCoord, self.yMouseCoord)
    else:
        increment = (self.pixelSquareSize - 1)/2
        lowX = int(self.xMouseCoord - increment)
        highX = int(self.xMouseCoord + increment)
        lowY = int(self.yMouseCoord - increment)
        highY = int(self.yMouseCoord + increment)
        
        for x in range(lowX, highX+1, 1):
            for y in range(lowY, highY+1, 1):
                if x &gt; -1 and  y &gt; -1:
                    self.mask[x, y] = True
                    self.setPixelToRed(x, y)    
    self.update()
    self.sigGetDetailsROI.emit()
    self.linkToGraphicsView.dictROIs.addMask(self.mask)
    self.sigRecalculateMeanROI.emit()</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadImage"><code class="name flex">
<span>def <span class="ident">reloadImage</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reloadImage(self):
    logger.info(&#34;FreeHandROI.GraphicsItem.reloadImage called&#34;)
    try:
        self.qimage = None
        self.pixMap = None
        self.qimage = self.origQimage
        self.pixMap = QPixmap.fromImage(self.qimage)
        self.update()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadImage: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadMask"><code class="name flex">
<span>def <span class="ident">reloadMask</span></span>(<span>self, mask)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reloadMask(self, mask):
    logger.info(&#34;FreeHandROI.GraphicsItem.reloadMask called&#34;)
    try:
        #redisplays the ROI represented by mask
        self.listROICoords = self.getListRoiInnerPoints(mask)
        self.fillFreeHandRoi()
        self.listROICoords = []
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.reloadMask: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.resetPixel"><code class="name flex">
<span>def <span class="ident">resetPixel</span></span>(<span>self, x, y)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def resetPixel(self, x, y):
    logger.info(&#34;FreeHandROI.GraphicsItem.resetPixel called&#34;)
    try:
        pixelColour = self.origQimage.pixel(x, y) 
        pixelRGB =  QColor(pixelColour).getRgb()
        redVal = pixelRGB[0]
        greenVal = pixelRGB[1]
        blueVal = pixelRGB[2]
        value = qRgb(redVal, greenVal, blueVal)
        self.qimage.setPixel(x, y, value)
        #convert QImage to QPixmap to be able to update image
        self.pixMap = QPixmap.fromImage(self.qimage)
        self.update()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.resetPixel: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setPixelToRed"><code class="name flex">
<span>def <span class="ident">setPixelToRed</span></span>(<span>self, x, y)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setPixelToRed(self, x, y):
    logger.info(&#34;FreeHandROI.GraphicsItem.setPixelToRed called&#34;)
    try:
        pixelColour = self.qimage.pixel(x, y) 
        pixelRGB =  QColor(pixelColour).getRgb()
        redVal = pixelRGB[0]
        greenVal = pixelRGB[1]
        blueVal = pixelRGB[2]
        if greenVal == 255 and blueVal == 255:
            #This pixel would be white if red channel set to 255
            #so set the green and blue channels to zero
            greenVal = blueVal = 0
        value = qRgb(255, greenVal, blueVal)
        self.qimage.setPixel(x, y, value)
        #convert QImage to QPixmap to be able to update image
        #with filled ROI
        self.pixMap = QPixmap.fromImage(self.qimage)
        self.update()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.setPixelToRed: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setROIPathColour"><code class="name flex">
<span>def <span class="ident">setROIPathColour</span></span>(<span>self, colour, listPathCoords)</span>
</code></dt>
<dd>
<div class="desc"><p>This function is not currently used</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setROIPathColour(self, colour, listPathCoords):
    &#34;&#34;&#34;This function is not currently used &#34;&#34;&#34;
    logger.info(&#34;FreeHandROI.GraphicsItem.setROIPathColour called&#34;)
    try:
        if listPathCoords is not None:
            for coords in listPathCoords:
                x = coords[0]
                y = coords[1]

                pixelColour = self.qimage.pixel(x, y) 
                pixelRGB =  QColor(pixelColour).getRgb()
                redVal = pixelRGB[0]
                greenVal = pixelRGB[1]
                blueVal = pixelRGB[2]
                if greenVal == 255 and blueVal == 255:
                    #This pixel would be white if red channel set to 255
                    #so set the green and blue channels to zero
                    greenVal = blueVal = 0
                value = qRgb(255, greenVal, blueVal)

                self.qimage.setPixel(x, y, value)
                #convert QImage to QPixmap to be able to update image
                #with filled ROI
                self.pixMap = QPixmap.fromImage(self.qimage)
                self.update()

                #Test if the ROI was not closed when drawn,
                #so it was closed with a staight line.
                lastIndex = len(listPathCoords)-1
                startX = listPathCoords[0][0]
                startY = listPathCoords[0][1]
                endX = listPathCoords[lastIndex][0]
                endY = listPathCoords[lastIndex][1]
                if int(endX) != int(startX) and int(endY) != int(startY):
                    #free hand drawn ROI is not closed, 
                    #so draw a straight line between start and end points
                    self.drawStraightLine(startX, startY, endX, endY, colour=colour)
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.setROIPathColour: &#39; + str(e))</code></pre>
</details>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigGetDetailsROI"><code class="name flex">
<span>def <span class="ident">sigGetDetailsROI</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigMouseHovered"><code class="name flex">
<span>def <span class="ident">sigMouseHovered</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigRecalculateMeanROI"><code class="name flex">
<span>def <span class="ident">sigRecalculateMeanROI</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomIn"><code class="name flex">
<span>def <span class="ident">sigZoomIn</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomOut"><code class="name flex">
<span>def <span class="ident">sigZoomOut</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.updateImageLevels"><code class="name flex">
<span>def <span class="ident">updateImageLevels</span></span>(<span>self, intensity, contrast, roi)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def updateImageLevels(self, intensity, contrast, roi):
    logger.info(&#34;FreeHandROI.GraphicsItem.updateImageLevels called&#34;)
    try:
        minValue = intensity - (contrast/2)
        maxValue = contrast + minValue
        imgData, alpha = makeARGB(data=self.pixelArray, levels=[minValue, maxValue])
        self.qimage = makeQImage(imgData, alpha)
        self.pixMap = QPixmap.fromImage(self.qimage)

        #Need to reapply mask
        if roi is not None and roi.any():
            self.reloadMask(roi)

        self.update()
    except Exception as e:
        print(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))
        logger.error(&#39;Error in FreeHandROI.GraphicsItem.updateImageLevels: &#39; + str(e))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI" href="index.html">WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.readLevels" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.readLevels">readLevels</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem">GraphicsItem</a></code></h4>
<ul class="">
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.addROItoImage" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.addROItoImage">addROItoImage</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.boundingRect" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.boundingRect">boundingRect</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.closeAndFillROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.closeAndFillROI">closeAndFillROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createBlankMask" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createBlankMask">createBlankMask</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createMaskFromDrawnROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.createMaskFromDrawnROI">createMaskFromDrawnROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawROIBoundary" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawROIBoundary">drawROIBoundary</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawStraightLine" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.drawStraightLine">drawStraightLine</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.eraseROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.eraseROI">eraseROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.fillFreeHandRoi" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.fillFreeHandRoi">fillFreeHandRoi</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getListRoiInnerPoints" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getListRoiInnerPoints">getListRoiInnerPoints</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getMaskData" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getMaskData">getMaskData</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getRoiMeanAndStd" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.getRoiMeanAndStd">getRoiMeanAndStd</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverEnterEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverEnterEvent">hoverEnterEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverLeaveEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverLeaveEvent">hoverLeaveEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverMoveEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.hoverMoveEvent">hoverMoveEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseMoveEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseMoveEvent">mouseMoveEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mousePressEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mousePressEvent">mousePressEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseReleaseEvent" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.mouseReleaseEvent">mouseReleaseEvent</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paint" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paint">paint</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paintROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.paintROI">paintROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadImage" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadImage">reloadImage</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadMask" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.reloadMask">reloadMask</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.resetPixel" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.resetPixel">resetPixel</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setPixelToRed" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setPixelToRed">setPixelToRed</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setROIPathColour" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.setROIPathColour">setROIPathColour</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigGetDetailsROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigGetDetailsROI">sigGetDetailsROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigMouseHovered" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigMouseHovered">sigMouseHovered</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigRecalculateMeanROI" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigRecalculateMeanROI">sigRecalculateMeanROI</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomIn" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomIn">sigZoomIn</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomOut" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.sigZoomOut">sigZoomOut</a></code></li>
<li><code><a title="WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.updateImageLevels" href="#WEASEL.Displays.ImageViewers.ComponentsUI.FreeHandROI.GraphicsItem.GraphicsItem.updateImageLevels">updateImageLevels</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>